<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fitness Goal Tracker</title>

<!-- ICONS -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<style>
* { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }

body {
    margin: 0;
    background: linear-gradient(135deg, #1b5e20, #66bb6a);
}

/* ---------- AUTH ---------- */
.auth {
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}
.card {
    background: white;
    width: 380px;
    padding: 30px;
    border-radius: 16px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.4);
    text-align: center;
}
.card i {
    font-size: 50px;
    color: #2e7d32;
}
.card h2 {
    color: #2e7d32;
}
input, select {
    width: 100%;
    padding: 12px;
    margin: 8px 0;
    border-radius: 8px;
    border: 1px solid #ccc;
}
button {
    width: 100%;
    padding: 12px;
    background: #2e7d32;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
}
button:hover {
    background: #1b5e20;
}
.link {
    color: #2e7d32;
    cursor: pointer;
    margin-top: 10px;
}
.credits {
    margin-top: 15px;
    font-size: 13px;
    color: #555;
}

/* ---------- DASHBOARD ---------- */
#dashboard { display: none; }

header {
    background: #1b5e20;
    color: white;
    padding: 18px;
    text-align: center;
    font-size: 24px;
}

.container {
    max-width: 900px;
    margin: 30px auto;
    background: white;
    padding: 30px;
    border-radius: 18px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.3);
}

.grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
}

.result {
    margin-top: 20px;
    padding: 20px;
    background: #e8f5e9;
    border-radius: 12px;
}

.logout {
    margin-top: 15px;
    background: #c62828;
}
.logout:hover {
    background: #b71c1c;
}
.hidden { display: none; }
</style>
</head>

<body>

<!-- LOGIN -->
<div class="auth" id="loginPage">
<div class="card">
<i class="fa-solid fa-dumbbell"></i>
<h2>Fitness Login</h2>
<input id="loginUser" placeholder="Username">
<input id="loginPass" type="password" placeholder="Password">
<button onclick="login()">Login</button>
<div class="link" onclick="showSignup()">Create Account</div>
<div class="credits">
Made By<br>
Ayush Pathak · Jatin Diwakar<br>
Harish Singh Mahara · Krrish Adhikari
</div>
</div>
</div>

<!-- SIGNUP -->
<div class="auth hidden" id="signupPage">
<div class="card">
<i class="fa-solid fa-user-plus"></i>
<h2>Create Account</h2>
<input id="newUser" placeholder="Username">
<input id="newPass" type="password" placeholder="Password">
<button onclick="signup()">Create Account</button>
<div class="link" onclick="showLogin()">Back to Login</div>
</div>
</div>

<!-- DASHBOARD -->
<div id="dashboard">
<header><i class="fa-solid fa-heart-pulse"></i> Fitness Goal Tracker</header>

<div class="container">
<h3>Enter Your Fitness Details</h3>

<div class="grid">
<select id="gender">
<option value="m">Male</option>
<option value="f">Female</option>
</select>

<input id="name" placeholder="Name">
<input id="weight" type="number" placeholder="Current Weight (kg)">
<input id="height" type="number" step="0.01" placeholder="Height (m)">
<input id="age" type="number" placeholder="Age (years)">
<input id="goalWeight" type="number" placeholder="Goal Weight (kg)">
<input id="weeks" type="number" placeholder="Weeks to reach goal">

<select id="activity">
<option value="1.2">Sedentary</option>
<option value="1.375">Lightly Active</option>
<option value="1.55">Moderately Active</option>
<option value="1.725">Very Active</option>
<option value="1.9">Extra Active</option>
</select>
</div>

<button onclick="calculate()">
<i class="fa-solid fa-calculator"></i> Calculate & Save Report
</button>

<div class="result" id="output"></div>

<button class="logout" onclick="logout()">
<i class="fa-solid fa-right-from-bracket"></i> Logout
</button>
</div>
</div>

<script>
/* AUTH */
let users = JSON.parse(localStorage.getItem("fitness_users")) || [];

function showSignup(){
    loginPage.classList.add("hidden");
    signupPage.classList.remove("hidden");
}
function showLogin(){
    signupPage.classList.add("hidden");
    loginPage.classList.remove("hidden");
}
function signup(){
    users.push({u:newUser.value, p:newPass.value});
    localStorage.setItem("fitness_users", JSON.stringify(users));
    alert("Account created successfully!");
    showLogin();
}
function login(){
    let ok = users.find(x => x.u === loginUser.value && x.p === loginPass.value);
    if(ok){
        loginPage.style.display = "none";
        dashboard.style.display = "block";
    } else alert("Invalid login");
}
function logout(){
    dashboard.style.display = "none";
    loginPage.style.display = "flex";
}

/* FITNESS LOGIC */
function bmiCategory(b){
    if(b < 18.5) return "Underweight";
    if(b < 25) return "Healthy";
    if(b < 30) return "Overweight";
    return "Obese";
}

function calculate(){
    let g = gender.value;
    let n = name.value;
    let w = +weight.value;
    let h = +height.value;
    let a = +age.value;
    let gw = +goalWeight.value;
    let wk = +weeks.value;
    let act = +activity.value;

    let bmi = w / (h*h);
    let gbmi = gw / (h*h);

    let bmr = g=="m"
        ? 88.362 + 13.397*w + 4.799*(h*100) - 5.677*a
        : 447.593 + 9.247*w + 3.098*(h*100) - 4.330*a;

    let maintenance = bmr * act;
    let daily = ((gw - w) * 7700) / (wk * 7);
    let goalCal = maintenance + daily;

    let minH = 18.5 * h * h;
    let maxH = 24.9 * h * h;

    output.innerHTML = `
    <b>Hello ${n}</b><br>
    Current BMI: ${bmi.toFixed(2)} (${bmiCategory(bmi)})<br>
    Goal BMI: ${gbmi.toFixed(2)} (${bmiCategory(gbmi)})<br>
    Daily Calories Required: <b>${goalCal.toFixed(0)}</b><br>
    Healthy Weight Range: ${minH.toFixed(1)} – ${maxH.toFixed(1)} kg
    `;

    let report = `
--- Fitness Report ---
Name: ${n}
Gender: ${g=="m"?"Male":"Female"}
Current Weight: ${w} kg
Goal Weight: ${gw} kg
BMI: ${bmi.toFixed(2)} (${bmiCategory(bmi)})
Goal BMI: ${gbmi.toFixed(2)} (${bmiCategory(gbmi)})
Daily Calories: ${goalCal.toFixed(0)}
Healthy Range: ${minH.toFixed(1)} – ${maxH.toFixed(1)} kg
`;

    let blob = new Blob([report], {type:"text/plain"});
    let a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "fitness_tracker.txt";
    a.click();
}
</script>

</body>
</html>
